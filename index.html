<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>AND by nicdoye</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>AND</h1>
          <h2>Another Name Daemon</h2>
        </header>

        <section id="downloads" class="clearfix">
<!--
          <a href="https://github.com/nicdoye/andns/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/nicdoye/andns/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
-->
          <a href="https://github.com/nicdoye/andns" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a id="and" class="anchor" href="#and" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>AND.</h3>

<p>AND, and previously, R-Squared were vapourware DNS servers, but please, read on.</p>

<h3>Rationale</h3>

<p>There are two use cases:</p>
<ol>
<li>A massive, globally coherent, caching DNS.</li>
<li>A seriously large, authoritative DNS server.</li>
</ol>

<p>Who would benefit from such things? Obviously ISPs would, but a community run version of either could mean we are no
longer reliant on the big companies (e.g. Google &amp; OpenDNS for caching, and AWS &amp; Google Cloud for authoritative servers).
In a world where free speech is being threatened so a big company could remove your authoritative name server, and where
people are worried about their DNS requests being monitored, a community alternative could be a good idea (even if the design is totally
different to mine).</p>

<h3>Design</h3>

<p>Perhaps the simplest designs are the best, which is why this is so short.</p>

<ol>
<li>Store all the data in a sharded, key-value store, which natively supports TTLs.</li>
<li>Have multiple front-ends: all of which are equal: no masters and no secondaries.</li>
</ol>

<p>And that's it. <a href="https://redis.io/">Redis</a> is the original choice for storing the data. For the "front end", since envisioning the idea,
<a href="https://coredns.io/">CoreDNS</a> has come on the scene and:</p>

<ol>
<li>It's already a DNS server: no TCP/UDP server or custom DNS daemon code to write</li>
<li>Has an awesome middleware layer, which means we can just implement this as a plugin</li>
</ol>

<p>So we should stand on the shoulders of giants, not reimplement the wheel and do a CoreDNS Middleware + Redis-based proof-of-concept, just to see if this: 
works at all; is a usable design; performs and scales.</p>

<p>Early optimisation is always a bad thing, so this may not be necessary.
I've written it here, because it's a common design pattern
for large-scale systems (because it's a common problem for them): 
put a(nother) (set of) DNS caches in front.</p>
<ul>
<li>For a caching-only name server, any caching-only name server will do and
this could help with (locally?) hot zone records</li> 
<li>However, authoratitive name servers would need the caches to act like slaves
and needs more thought.</li>
</ul>
<p>And I repeat: this may not be necessary.</p>

<h3>Sample prototype</h3>

<p>A <i>very</i> small Perl prototype of how simple it is to store data appears in its own repo: <a href="https://github.com/nicdoye/andns-prototype">andns-prototype</a>.</p>

<h3>A Favo(u)r</h3>

<p>Can I first ask you a favour? If you read this (brief) design and choose to implement it, please credit me. 
I've failed to write this name server for many years, so I want the design out there in the open. It's more important
that <i>someone</i> writes it than I sit here with it in my head, jealously keeping it secret, then releasing it to the
world, fully complete. <a href="https://www.youtube.com/watch?v=0SARbwvhupQ&t=2732s">Watch this video</a> to see why
that's innefective, stupid, and egotistic. (Although I am still violating one of the ideas in this video: announcing
too early, with no real code).</p>

<p>I am an unnecessary component of any implementation: go ahead and do it without me. Just please mention me somewhere.</p>

<p><i>(Although since first coming up with this, I realised that AWS Route 53 and others may well already be designed in the same way, so it may
not be original. Alternatively, it could suck, and now I look like an arrogant &lt;swear-word&gt;.)</i></p>

<h3>History</h3>

<p>My first attempt R-Squared was an attempt/PoC using Ruby and Redis (hence R<sup>2</sup>). 
Then
I was going to write AND (Another Name Daemon) in C for no better reason than it would be fun and more
hardcore.</p>

<ol>
<li>2013 <a href="https://github.com/nicdoye/rsquared">R Squared</a>'s empty repo.</li>
<li>2013 <a href="https://github.com/nicdoye/rsquared-message">R Squared Message</a>: RFC 1035 messages in ruby (unfinished)</li>
<li>2014 <a href="https://github.com/nicdoye/andns">AND(NS)</a>: Aborted C implementation</li>
<li>2014 <a href="https://github.com/nicdoye/andns-prototype">Prototype</a>: Perl demo of storing data in Redis</li>
<li>2017 <a href="https://nicdoye.github.com/andns">Design released</a>: let's build this for the community and for the world</li>
</ol>

        </section>

        <footer>
          AND is/was maintained by <a href="https://github.com/nicdoye">nicdoye</a> (<a href="https://worldofnic.org">homepage</a>).<br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

                  <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-34783744-6");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

      </div>
    </div>
  </body>
</html>
